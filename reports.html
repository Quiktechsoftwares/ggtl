<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>GGTL Report</title>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css"
        />
    </head>

    <style>
        .hide {
            display: none;
        }
        .show {
            display: block;
        }
    </style>

    <body>
        <!-- Navbar -->
        <nav class="navbar is-success">
            <div class="navbar-brand">
                <a class="navbar-item" href="https://ggtl.in">
                    <a class="navbar-item"> GGTL.in </a>
                </a>
            </div>

            <div id="navbarBasicExample" class="navbar-menu">
                <div class="navbar-end">
                    <a href="https://ggtl.in" class="navbar-item"> Home </a>
                </div>
            </div>
        </nav>
        <!-- End NavBar -->

        <!-- Input Section -->
        <div class="columns p-6">
            <div class="column">
                <image src="https://ggtl.in/assets/img/logo2.png" alt="ggtl" />
            </div>
            <div class="column">
                <h1 class="py-4 title is-2">Enter the Certificate Number</h1>
                <p class="subtitle is-4">
                    By Entering the cerificate number, you can get back the
                    Certificate Details
                </p>
                <div class="control is-medium">
                    <input
                        class="input is-link is-medium"
                        type="text"
                        id="input"
                        placeholder="Certificate ID"
                        value=""
                    />
                </div>
                <button
                    id="button"
                    class="button is-link is-medium is-fullwidth my-3"
                    onclick="fetchresults()"
                    type="button"
                    id="submit"
                >
                    submit
                </button>

                <article id="nocert" class="hide">
                    <div class="message-body">
                        No Certificate Found, Please check your certificate
                        Number
                    </div>
                </article>
            </div>
        </div>

        <!-- Certificate Section -->

        <div id="result" class="is-hidden">
            
            <div class="column">
                <p id="cid" class="subtitle is-5 has-text-weight-semibold">
                    Certificate Id:
                </p>
                <p id="gname" class="subtitle is-5 has-text-weight-semibold">
                    Gem Name:
                </p>
                <p id="gweight" class="subtitle is-5 has-text-weight-semibold">
                    Gem Weight:
                </p>
                <p id="gcolor" class="subtitle is-5 has-text-weight-semibold">
                    Gem Color:
                </p>

                <p id="gtype" class="subtitle is-5 has-text-weight-semibold">
                    Gem Type:
                </p>
                <p id="gcuttype" class="subtitle is-5 has-text-weight-semibold">
                    Gem Cut Type:
                </p>
                <p id="on" class="subtitle is-5 has-text-weight-semibold">
                    Issued On:
                </p>
                <p id="by" class="subtitle is-5 has-text-weight-semibold">
                    Issued By:
                </p>
            </div>


            <div class="column is-4 m-2">
                <img
                    class="image"
                    style="border-radius: 60px"
                    id="gimage"
                    src=""
                    onerror="imageLoaderror()"
                />
            </div>


        </div>
    </body>

    <script>
        async function fetchresults() {
            try {
                let input = document.getElementById("input").value;
                let button = document.getElementById("button");
                let nocert = document.getElementById("nocert");

                let cid = document.getElementById("cid");
                let gimage = document.getElementById("gimage");
                let gname = document.getElementById("gname");
                let gweight = document.getElementById("gweight");
                let gtype = document.getElementById("gtype");
                let gcuttype = document.getElementById("gcuttype");
                let gcolor = document.getElementById("gcolor");
                let on = document.getElementById("on");
                let by = document.getElementById("by");

                let result = document.getElementById("result");

                nocert.classList.add("is-hidden");
                result.classList.add("is-hidden");

                if (!input) {
                    alert("input required");
                    return;
                }
                let BASE_URL = "https://ggtl.in/api/certificate/get/";

                button.classList.add("is-loading");

                const response = await fetch(BASE_URL + input);
                button.classList.remove("is-loading");
                const json = await response.json();

                if (json.status === "success") {
                    result.classList.remove("is-hidden");
                    result.classList.add("p3");
                    result.classList.add("columns");

                    cid.innerText = `Certificate Id : ${json.data[0].certificate_id}`;
                    gimage.src = json.data[0].gem_image;
                    gname.innerText = `Gem Name : ${json.data[0].gem_name}`;
                    gweight.innerText = `Gem Weight : ${json.data[0].gem_weight}`;
                    gtype.innerText = `Gem Type : ${json.data[0].gem_type}`;
                    gtype.innerText = `Gem Type : ${json.data[0].gem_type}`;
                    gcuttype.innerText = `Gem Cut Type : ${json.data[0].gem_cut_type}`;
                    gcolor.innerText = `Gem Cut Color : ${json.data[0].gem_color}`;
                    on.innerText = `Issued On : ${json.data[0].localtime}`;
                    by.innerText = `Issued By : GGTL Admin`;
                } else {
                    nocert.classList.remove("is-hidden");
                    nocert.classList.add("show");
                    nocert.classList.add("message");
                    nocert.classList.add("is-danger");
                }
            } catch (err) {
                console.log(err);
                alert("Failed", err);
            }
        }

        function imageLoaderror() {
            let gimage = document.getElementById("gimage");
            gimage.src =
                "https://1080motion.com/wp-content/uploads/2018/06/NoImageFound.jpg.png";
        }
    </script>
</html>
